@model WebTruyen.Models.User;

<div class="container mt-5">
    <div class="text-center">
        <!-- Ảnh đại diện hình tròn -->
        <img src="/Icon-search/avt.jpg" alt="Avatar" class="rounded-circle" width="150" height="150" />

        <!-- Tên người dùng -->
        <h2 class="mt-3">@Model.UserName</h2>
    </div>

    <form method="post" asp-action="ChangeUserInfo" id="userInfoForm">
        <div class="mt-4">
            <!-- Thông tin người dùng -->
            <div class="form-group">
                <label>Email:</label>
                <input tag="info" type="email" class="form-control" asp-for="Email" readonly />
            </div>

            <div class="form-group mt-3">
                <label>Số điện thoại:</label>
                <input tag="info" type="text" class="form-control" asp-for="PhoneNumber" readonly />
            </div>

            <div class="form-group mt-3">
                <label>Mật khẩu:</label>
                <input tag="info" type="password" class="form-control" asp-for="Password" readonly />
            </div>
            <button type="submit" id="saveButton" onclick="save()" style="display:none;">Lưu</button>
           
        </div>
    </form>
    <button type="button" id="changeInfo" onclick="changeInfo()" style="display:inline-block">Thay đổi thông tin</button>

    <button type="button" id="cancelButton" style="display:none;" onclick="cancelChanges()">Hủy</button>
</div>

<script>
    function changeInfo() {
        // Lấy tất cả các trường input với tag="info"
        const inputs = document.querySelectorAll('input[tag="info"]');

        // Duyệt qua từng input và bỏ thuộc tính readonly
        inputs.forEach(input => {
            input.removeAttribute('readonly');
        });
        document.getElementById('saveButton').style.display = 'inline-block';
        document.getElementById('cancelButton').style.display = 'inline-block';
        document.getElementById('changeInfo').style.display = 'None';
    }
    function cancelChanges() {
        // Lấy tất cả các trường input với tag="info"
        const inputs = document.querySelectorAll('input[tag="info"]');

        // Đặt lại giá trị của các trường về giá trị ban đầu
        inputs.forEach(input => {
            input.value = input.defaultValue; // Hoặc bạn có thể lấy giá trị từ model
            input.setAttribute('readonly', true);
        });

        // Ẩn các nút Save và Cancel
        document.getElementById('saveButton').style.display = 'none';
        document.getElementById('cancelButton').style.display = 'none';
        document.getElementById('changeInfo').style.display = 'inline-block';
    }
    function save() {
        const inputs = document.querySelectorAll('input[tag="info"]');

        // Duyệt qua từng input và bỏ thuộc tính readonly
        inputs.forEach(input => {
            input.getAttribute('readonly',true);
        });
        alert("Thay đổi thông tin thành công!");
        document.getElementById('saveButton').style.display = 'none';
        document.getElementById('cancelButton').style.display = 'none';
        document.getElementById('changeInfo').style.display = 'inline-block';
    }
</script>

<style>
    .container {
        max-width: 500px;
        margin: auto;
    }
</style>
